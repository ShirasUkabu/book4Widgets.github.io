
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>OPTIONAL Exercise: Using one plot as a control for another &#8212; Book for Widgets</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '06.More_widget_libraries/extras/extra_examples/bqplot_A_plot_as_a_control_in_a_widget';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="OPTIONAL Input Widgets and Geospatial Data Analysis" href="flight_sim.html" />
    <link rel="prev" title="OPTIONAL Demo: Reactive plot with multiple regressions" href="bqplot_A_Penalized_regression.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Book for Widgets - Home"/>
    <img src="../../../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Book for Widgets - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">01. Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../01.Introduction/01.00-introduction.html">Jupyter Widgets Tutorial Introduction</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../01.Introduction/01.01-overview.html">Overview</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">02. Widget Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../02.Widget_overview/01.Interact/01.00-Using-Interact.html">Widgets without writing widgets: interact</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../02.Widget_overview/01.Interact/01.01-OPTIONAL-More-About-Interact.html">OPTIONAL - More about interact</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../02.Widget_overview/02.Basics/02.00-Widget_Basics.html">Simple Widget Introduction</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../02.Widget_overview/03.WidgetList/03.00-widget-list.html">2.3-1 Ipywidgets Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../02.Widget_overview/03.WidgetList/03.01-more-on-output-widget.html">2.3-2 Output</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">03. Widget Events</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../03.Widget_events/03.00-Widget_Events.html">3.1 Widgets Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../03.Widget_events/03.01-OPTIONAL-Widget_Events_2.html"><em>OPTIONAL</em> Three approaches to events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../03.Widget_events/03.02-OPTIONAL-Widget_Events_2_--_bad_password_generator%2C_version_1.html"><em>OPTIONAL</em> Password generator: <code class="docutils literal notranslate"><span class="pre">observe</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../03.Widget_events/03.03-OPTIONAL-Widget_Events_2_--_Separating_Concerns.html"><em>OPTIONAL</em> Separating the logic from the widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../03.Widget_events/03.04-OPTIONAL-Widget_Events_2--Separating_concerns%2C_object_oriented.html"><em>OPTIONAL</em> Separating the logic using classes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">04. Widget Styling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.00-Layout-and-Styling-Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.01-widget-layout-and-styling.html">4.1 Layout and Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.03-more-flexbox-layout.html">4.2 Flexbox Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.04-OPTIONAL-widget-label-styling.html">OPTIONAL - Widget label styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.05-OPTIONAL-widget-specific-styling.html">OPTIONAL Predefined widget styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/04.06-OPTIONAL-container-exercises.html"><em>OPTIONAL</em> widget layout exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04.Widget_styling/Table_of_widget_keys_and_style_keys.html">Scroll down to get to the interesting tables…</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">05. Build Complex Libraries</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../05.Build-complex-libs/05.00-Build-complex-libraries.html">5.1 Building Complex Widgets Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../05.Build-complex-libs/05.01-Refactoring.html">5.2 Refactoring The Class-based Implementation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">06. More Widget Libraries</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../06.00-More_widget_libraries.html">PREVIEW More Widget Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06.01-ipycanvas.html">6.1 ipycanvas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06.02-ipycytoscape.html">ipycytoscape: Interactive graphs</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../06.03-ipydatagrid.html">6.3 ipydatagrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06.04-ipygany.html">6.4 ipygany</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06.05-other-widget-libraries.html">Other widget libraries</a></li>





<li class="toctree-l1"><a class="reference internal" href="../bqplot.html">bqplot: complex interactive visualizations</a></li>





<li class="toctree-l1"><a class="reference internal" href="../ipyleaflet.html">ipyleaflet: Interactive maps</a></li>




<li class="toctree-l1"><a class="reference internal" href="../ipympl.html">EXTRAS ipympl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ipytree.html">EXTRAS ipytree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ipyvolume.html">ipyvolume: 3D plotting in the notebook</a></li>


<li class="toctree-l1"><a class="reference internal" href="../ipyvuetify.html">Ipyvuetify</a></li>


<li class="toctree-l1"><a class="reference internal" href="../ipywebrtc.html">EXTRAS ipywebrtc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pythreejs.html">pythreejs: 3D rendering in the browser</a></li>

<li class="toctree-l1"><a class="reference internal" href="../PyWWT.html">PyWWT - widget interface to the World Wide Telescope</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">07. Widgets Outside Notebook Context</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../07.Widgets_outside_notebook_context/07.00-voila.html"><em>PREVIEW</em> Dashboarding with widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../07.Widgets_outside_notebook_context/07.01-voila-basics.html">7.1 Voila Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../07.Widgets_outside_notebook_context/07.02-voila-vuetify.html">Deploying voilà</a></li>




<li class="toctree-l1"><a class="reference internal" href="../../../07.Widgets_outside_notebook_context/07.03-jupyterlite.html">Lightweight Jupyter Frontend running in the browser</a></li>






</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">08. Ipywidgets 8</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../08.Ipywidgets_8/08.00-ipywidgets_8.html">ipywidgets 8</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F06.More_widget_libraries/extras/extra_examples/bqplot_A_plot_as_a_control_in_a_widget.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/06.More_widget_libraries/extras/extra_examples/bqplot_A_plot_as_a_control_in_a_widget.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>OPTIONAL Exercise: Using one plot as a control for another</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-widget-will-look-like-this">Final widget will look like this:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-function-that-calculates-the-fourier-series">Define the function that calculates the Fourier series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-amplitude-control">Create the amplitude control</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-some-initial-conditions">Set up some initial conditions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-plot-of-the-fourier-series">Create the plot of the Fourier series</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-amplitude-control-to-match-this-initial-case">Set the amplitude control to match this initial case</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#you-make-the-widget-out-of-amplitude-control-and-result">You make the widget out of <code class="docutils literal notranslate"><span class="pre">amplitude_control</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looks-good-connect-things-up">Looks good, connect things up</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">bqplot</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Axis</span><span class="p">,</span> <span class="n">ColorAxis</span><span class="p">,</span> <span class="n">LinearScale</span><span class="p">,</span> <span class="n">DateScale</span><span class="p">,</span> <span class="n">DateColorScale</span><span class="p">,</span> <span class="n">OrdinalScale</span><span class="p">,</span>
    <span class="n">OrdinalColorScale</span><span class="p">,</span> <span class="n">ColorScale</span><span class="p">,</span> <span class="n">Scatter</span><span class="p">,</span> <span class="n">Lines</span><span class="p">,</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">Tooltip</span>
<span class="p">)</span>

<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="kn">from</span> <span class="nn">bqplot</span> <span class="kn">import</span> <span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">Axis</span><span class="p">,</span> <span class="n">ColorAxis</span><span class="p">,</span> <span class="n">LinearScale</span><span class="p">,</span> <span class="n">DateScale</span><span class="p">,</span> <span class="n">DateColorScale</span><span class="p">,</span> <span class="n">OrdinalScale</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">OrdinalColorScale</span><span class="p">,</span> <span class="n">ColorScale</span><span class="p">,</span> <span class="n">Scatter</span><span class="p">,</span> <span class="n">Lines</span><span class="p">,</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">Tooltip</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;bqplot&#39;
</pre></div>
</div>
</div>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="optional-exercise-using-one-plot-as-a-control-for-another">
<h1><em>OPTIONAL</em> Exercise: Using one plot as a control for another<a class="headerlink" href="#optional-exercise-using-one-plot-as-a-control-for-another" title="Link to this heading">#</a></h1>
<p>Although <a class="reference external" href="https://github.com/bloomberg/bqplot">bqplot</a> is a versatile plotting package, one of its unique strengths is that the plot is a widget. Plot elements, like the position of points on the graph, can be monitored for changes like any other widget trait.</p>
<p>The example in this notebook graphs a Fourier sine series using <a class="reference external" href="https://github.com/bloomberg/bqplot">bqplot</a> to graph the series and a separate <a class="reference external" href="https://github.com/bloomberg/bqplot">bqplot</a> to allow users to sest the amplitude of the terms in the series.</p>
<section id="final-widget-will-look-like-this">
<h2>Final widget will look like this:<a class="headerlink" href="#final-widget-will-look-like-this" title="Link to this heading">#</a></h2>
<img src="images/plot-as-control.gif" width="50%"></section>
<section id="define-the-function-that-calculates-the-fourier-series">
<h2>Define the function that calculates the Fourier series<a class="headerlink" href="#define-the-function-that-calculates-the-fourier-series" title="Link to this heading">#</a></h2>
<p>Though in a real application the plot range and number of points should perhaps be configurable via a widget, for this example they are hard coded.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fourier_series</span><span class="p">(</span><span class="n">amplitudes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the fourier sine series given a set of amplitudes. The </span>
<span class="sd">    period of the fundamental of the series is 1 and the series is </span>
<span class="sd">    generated for two periods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">period</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">period</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span> <span class="o">/</span> <span class="n">period</span><span class="p">)</span> 
               <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">amplitudes</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<p>The number of Fourier components in the series should probably also be user-configurable; for the sake of simplicity it is hard coded here. We also define some test data so we can look at plot for setting the amplitudes before we connect it up to the plot of the Fourier series sum.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N_fourier_components</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">x_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N_fourier_components</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">y_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">N_fourier_components</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-the-amplitude-control">
<h2>Create the amplitude control<a class="headerlink" href="#create-the-amplitude-control" title="Link to this heading">#</a></h2>
<p>We will create both this and the plot of the series using the “Grammar of Graphics” interface to bqplot. That makes it easier to treat the plot as a widget.</p>
<p>Please read through and execute the example below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start by defining a scale for each axis</span>
<span class="n">sc_x</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>

<span class="c1"># The amplitudes are limited to ±1 for this example...</span>
<span class="n">sc_y</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c1"># You can create a Scatter object without supplying the data at this</span>
<span class="c1"># point. It is here so we can see how the control looks.</span>
<span class="n">scat</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_data</span><span class="p">,</span> 
               <span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">sc_x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">sc_y</span><span class="p">},</span> 
               <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;orange&#39;</span><span class="p">],</span>
               <span class="c1"># This is what makes this plot interactive</span>
               <span class="n">enable_move</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Only allow points to be moved vertically...</span>
<span class="n">scat</span><span class="o">.</span><span class="n">restrict_y</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Define the axes themselves</span>
<span class="n">ax_x</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">sc_x</span><span class="p">)</span>
<span class="n">ax_y</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">sc_y</span><span class="p">,</span> <span class="n">tick_format</span><span class="o">=</span><span class="s1">&#39;0.2f&#39;</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>

<span class="c1"># The graph itself...</span>
<span class="n">amplitude_control</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">marks</span><span class="o">=</span><span class="p">[</span><span class="n">scat</span><span class="p">],</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="n">ax_x</span><span class="p">,</span> <span class="n">ax_y</span><span class="p">],</span> 
                           <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Fourier amplitudes&#39;</span><span class="p">)</span>

<span class="c1"># This width is chosen just to make the plot fit nicely with </span>
<span class="c1"># another. Change it if you want.</span>
<span class="n">amplitude_control</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;400px&#39;</span>

<span class="c1"># Let&#39;s see what this looks like...</span>
<span class="n">amplitude_control</span>
</pre></div>
</div>
</div>
</div>
<p>Try dragging the points on the graph around. Print the <span class="math notranslate nohighlight">\(y\)</span>-data from the plot (<code class="docutils literal notranslate"><span class="pre">scat.y</span></code>) and the original data below you they should be different.</p>
</section>
<section id="set-up-some-initial-conditions">
<h2>Set up some initial conditions<a class="headerlink" href="#set-up-some-initial-conditions" title="Link to this heading">#</a></h2>
<p>To test our sine series plot it is helpful to start with a simple-to-understand series: just the fundmental, with amplitude 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add some test data to make view the result</span>
<span class="n">initial_amplitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">initial_amplitudes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-the-plot-of-the-fourier-series">
<h2>Create the plot of the Fourier series<a class="headerlink" href="#create-the-plot-of-the-fourier-series" title="Link to this heading">#</a></h2>
<p>As above, we create the plot using the Grammar of Graphics interface.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lin_x</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>
<span class="n">lin_y</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>

<span class="c1"># Note that here, unlike above, we do not set the initial data.</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">Lines</span><span class="p">(</span><span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">lin_x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">lin_y</span><span class="p">},</span> <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;orange&#39;</span><span class="p">],</span>
               <span class="n">enable_move</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">ax_x</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">lin_x</span><span class="p">)</span>
<span class="n">ax_y</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">lin_y</span><span class="p">,</span> <span class="n">tick_format</span><span class="o">=</span><span class="s1">&#39;0.2f&#39;</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">marks</span><span class="o">=</span><span class="p">[</span><span class="n">line</span><span class="p">],</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="n">ax_x</span><span class="p">,</span> <span class="n">ax_y</span><span class="p">],</span> 
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Fourier sine series&#39;</span><span class="p">,</span>
                <span class="c1"># Honestly, I just like the way the animation looks.</span>
                <span class="c1"># Value is in milliseconds.</span>
                <span class="n">animation_duration</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1"># Size as you wish...</span>
<span class="n">result</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">&#39;400px&#39;</span>

<span class="c1"># Calculate the fourier series....</span>
<span class="n">line</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">fourier_series</span><span class="p">(</span><span class="n">initial_amplitudes</span><span class="p">)</span>

<span class="c1"># Let&#39;s take a look!</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<section id="set-the-amplitude-control-to-match-this-initial-case">
<h3>Set the amplitude control to match this initial case<a class="headerlink" href="#set-the-amplitude-control-to-match-this-initial-case" title="Link to this heading">#</a></h3>
<p>Note that you can access the <code class="docutils literal notranslate"><span class="pre">scat</span></code> object from the <code class="docutils literal notranslate"><span class="pre">Figure</span></code> widget. Each line, scatter or other mark on the plot is in the list at <code class="docutils literal notranslate"><span class="pre">.marks</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">amplitude_control</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">initial_amplitudes</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="you-make-the-widget-out-of-amplitude-control-and-result">
<h2>You make the widget out of <code class="docutils literal notranslate"><span class="pre">amplitude_control</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code><a class="headerlink" href="#you-make-the-widget-out-of-amplitude-control-and-result" title="Link to this heading">#</a></h2>
<p>See the animation above for a reminder of the target. Dragging the amplitudes will <em>not</em> change the sine series yet.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load solutions/bqplot-as-control/box-widget.py</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">amplitude_control</span><span class="p">,</span> <span class="n">result</span><span class="p">])</span>
<span class="n">box</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="looks-good-connect-things-up">
<h2>Looks good, connect things up<a class="headerlink" href="#looks-good-connect-things-up" title="Link to this heading">#</a></h2>
<p>Fill in the body of the function below, which will be observed by <code class="docutils literal notranslate"><span class="pre">amplitude_control</span></code>. You should call <code class="docutils literal notranslate"><span class="pre">fourier_series</span></code> and set the appropriate line properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load solutions/bqplot-as-control/update_line.py</span>
<span class="k">def</span> <span class="nf">update_line</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c1"># fill in</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># React to changes in the y value....</span>
<span class="n">amplitude_control</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_line</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "widgets-tutorial"
        },
        kernelOptions: {
            name: "widgets-tutorial",
            path: "./06.More_widget_libraries\extras\extra_examples"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'widgets-tutorial'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="bqplot_A_Penalized_regression.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><em>OPTIONAL</em> Demo: Reactive plot with multiple regressions</p>
      </div>
    </a>
    <a class="right-next"
       href="flight_sim.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><em>OPTIONAL</em> Input Widgets and Geospatial Data Analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-widget-will-look-like-this">Final widget will look like this:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-function-that-calculates-the-fourier-series">Define the function that calculates the Fourier series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-amplitude-control">Create the amplitude control</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-some-initial-conditions">Set up some initial conditions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-plot-of-the-fourier-series">Create the plot of the Fourier series</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-amplitude-control-to-match-this-initial-case">Set the amplitude control to match this initial case</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#you-make-the-widget-out-of-amplitude-control-and-result">You make the widget out of <code class="docutils literal notranslate"><span class="pre">amplitude_control</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looks-good-connect-things-up">Looks good, connect things up</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By IroaseP(resigned)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>